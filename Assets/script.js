// menu and game section
const menu = document.getElementById("menu");
const game = document.getElementById("game");
const gridElement = document.getElementById("grid");
const colorsElement = document.getElementById("colors");

// buttons
const toggleBtn = document.getElementById("toggle-numbers");
const resetBtn = document.getElementById("reset");
const winMessage = document.getElementById("win-message");
const backToMenuBtn = document.getElementById("back-to-menu");

let currentPuzzle = null;
let currentColor = null;
let numbersVisible = true;

const puzzles = {
    // Pikachu puzzle
    easy: {
        palette: {
            1: "#ffd633",
            2: "#000000",
            3: "#ff3333",
            4: "#ffffff"
        },
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,2,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0],
            [0,2,1,2,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0],
            [2,1,1,1,2,0,0,0,0,0,0,0,2,1,2,0,0,0,0],
            [2,1,1,1,1,2,2,2,0,0,0,0,2,1,1,2,0,0,0],
            [0,2,1,1,1,2,2,2,2,2,0,0,2,1,1,2,0,0,0],
            [0,0,2,1,1,1,2,2,1,1,2,2,1,1,1,1,2,0,0],
            [0,0,0,2,1,1,2,2,1,1,1,1,1,1,1,1,1,2,0],
            [0,0,2,1,1,2,0,2,1,1,1,1,1,1,1,1,1,4,2],
            [0,0,2,1,2,0,0,2,1,1,1,1,1,1,1,1,1,2,2],
            [0,0,0,2,1,2,2,1,1,1,1,1,2,4,1,1,1,1,2],
            [0,0,0,0,2,2,2,1,1,1,3,3,2,2,1,1,1,2,0],
            [0,0,0,0,0,2,2,2,1,1,1,3,1,1,1,1,2,0,0],
            [0,0,0,0,0,2,1,1,1,1,1,1,1,1,1,1,1,2,0],
            [0,0,0,0,0,2,2,1,1,2,1,1,1,1,1,2,2,0,0],
            [0,0,0,0,0,2,1,1,1,1,2,1,1,1,1,2,0,0,0],
            [0,0,0,0,0,2,1,1,1,2,1,1,1,1,2,1,2,0,0],
            [0,0,0,0,0,0,2,1,1,1,1,1,2,2,2,2,2,0,0],
            [0,0,0,0,0,0,2,2,1,2,2,2,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,2,1,1,1,2,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    }

    // Espeon puzzle
    medium: {
        palette: {
            1: "#c9a6d9",
            2: "#b07dc9",
            3: "#8c5fae",
            4: "#5b3b74",
            5: "#1d0019ff",
            6: "#ffffff",
            7: "#d62828",
            8: "#8b1a1a",
            9: "#1e3a8a",
            10: "#ebdbf3ff"
        }
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,4,1,1,1,1,1,1,1,1,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,1,2,2,2,4,4,4,4,4,4,4,1,1,1,3,3,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,2,2,4,4,0,4,2,2,2,2,2,2,2,1,1,1,3,3,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,3,4,4,0,0,4,3,3,3,4,4,4,4,4,3,3,1,1,1,3,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,4,3,3,3,4,0,0,0,0,0,0,0,3,3,1,1,3,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,3,4,0,0,0,0,0,0,0,0,0,0,3,1,1,3,0,0,0,0,0],
            [0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,3,0,0,0,0],
            [0,3,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,4,0,0,0],
            [0,3,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,2,4,0,0],
            [0,3,2,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,2,4,0,0],
            [0,3,2,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,4,2,2,4,0],
            [0,5,2,1,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,2,2,3,0,0,0,0,0,0,0,0,0,0,4,2,3,4,0],
            [0,5,2,1,1,1,1,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,1,1,1,2,2,4,0,0,0,0,0,0,0,0,0,0,0,4,2,3,4,0],
            [0,0,5,2,1,1,1,1,3,0,0,0,0,0,0,0,3,3,1,1,1,1,1,2,2,5,5,4,0,0,0,0,0,0,0,0,0,0,0,4,2,3,4,0],
            [0,0,5,5,2,1,1,1,1,3,3,3,3,0,0,3,1,1,1,1,1,2,2,5,5,5,4,0,0,0,0,0,0,0,0,0,0,0,0,4,2,3,4,0],
            [0,0,4,5,2,1,1,3,3,1,1,1,1,3,3,1,1,1,2,2,2,5,5,5,5,4,4,0,0,0,0,0,0,0,0,0,0,0,4,2,2,4,0,0],
            [0,0,0,4,5,2,3,1,10,10,1,1,1,3,1,1,1,2,2,5,5,5,5,5,4,4,0,0,0,0,0,0,0,0,0,0,0,0,4,2,3,4,0,0],
            [0,0,0,4,5,3,1,10,10,10,10,1,1,1,1,1,1,3,5,5,5,5,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,4,2,2,3,4,0,0],
            [0,0,0,4,3,1,10,10,10,10,10,10,1,1,1,1,3,3,3,5,4,4,4,4,0,0,0,0,0,0,3,3,4,4,0,0,4,2,2,3,4,0,0,0],
            [0,0,0,0,3,10,10,10,10,10,10,10,1,1,1,1,4,4,4,4,4,4,4,,0,0,0,0,3,3,1,1,1,2,4,4,2,2,3,4,0,0,0,0],
            [0,0,0,3,1,1,8,8,1,10,1,1,1,1,1,1,1,1,4,4,4,4,0,0,0,0,2,2,1,1,1,1,1,1,1,1,4,4,4,0,0,0,0,0],
            [0,0,0,3,1,8,6,7,8,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,2,1,1,1,1,1,1,1,1,1,1,1,5,4,0,0,0,0,0],
            [0,0,0,3,1,8,7,7,8,1,1,1,1,1,1,1,1,1,1,1,1,2,4,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,4,0,0,0,0,0],
            [0,0,0,3,1,1,8,8,1,1,1,5,5,1,1,1,2,1,1,1,1,1,1,4,2,2,2,1,1,1,1,1,1,1,1,1,1,2,4,0,0,0,0,0],
            [0,0,0,3,1,1,1,1,1,1,5,9,9,1,1,1,4,1,4,2,2,1,1,1,4,2,2,2,1,1,1,1,1,1,1,2,1,2,2,4,0,0,0,0],
            [0,0,0,3,1,1,1,1,1,5,6,9,9,1,1,1,4,4,1,4,2,2,2,2,2,4,2,2,1,2,1,1,1,1,2,1,2,2,2,4,0,0,0,0],
            [0,0,0,0,3,1,1,1,1,5,9,9,1,1,1,4,3,3,4,3,4,4,4,4,4,4,2,2,2,1,2,1,1,2,2,2,2,2,2,4,0,0,0,0],
            [0,0,0,0,3,1,1,1,1,1,1,1,1,1,4,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,0,0,0,0],
            [0,0,0,0,0,3,1,1,1,1,1,1,1,4,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,0,0,0,0],
            [0,0,0,0,0,0,3,3,3,3,3,4,4,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,3,1,2,2,2,2,2,2,2,2,2,2,4,2,2,2,2,2,2,3,2,2,2,2,2,2,2,4,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,3,1,1,2,2,2,2,2,2,2,2,2,4,2,2,2,2,2,2,3,2,2,2,2,2,2,2,4,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,3,1,4,2,2,2,2,2,2,2,2,4,2,2,2,3,3,4,4,3,2,2,2,2,2,2,2,4,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,4,1,4,2,2,2,2,2,2,2,2,4,3,3,3,4,4,3,3,4,3,2,2,2,2,2,2,2,4,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,4,4,3,1,1,1,2,2,2,2,4,4,4,4,4,3,3,3,3,3,4,2,2,2,2,2,2,2,4,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,4,3,1,1,1,1,2,2,2,4,0,0,0,0,4,3,3,3,3,3,4,4,2,2,2,2,2,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,2,2,2,4,0,0,0,0,0,0,4,4,3,3,3,4,0,4,4,4,2,2,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,2,2,2,4,0,0,0,0,0,0,0,0,0,0,4,3,3,3,4,0,0,0,4,2,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,3,1,2,2,2,4,4,2,4,0,0,0,0,0,0,0,0,0,0,4,3,3,4,0,0,0,0,4,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,0,4,2,2,2,2,4,2,2,2,4,0,0,0,0,0,0,0,0,0,0,4,3,3,4,0,0,0,0,4,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,0,4,2,2,2,4,0,4,2,2,2,4,0,0,0,0,0,0,0,0,0,4,3,3,4,0,0,0,0,4,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,4,2,2,2,4,0,0,4,2,2,2,4,0,0,0,0,0,0,0,0,4,2,2,3,4,0,0,0,0,4,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,4,2,2,2,4,0,0,4,2,2,2,4,0,0,0,0,0,0,0,4,2,2,2,3,4,0,0,0,4,2,2,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,3,1,2,4,0,0,0,4,2,2,2,4,0,0,0,0,0,0,4,2,3,2,2,4,0,0,0,0,4,1,3,2,4,0,0],
            [0,0,0,0,0,0,0,0,0,3,1,2,4,0,0,4,1,1,2,4,0,0,0,0,0,0,0,4,2,3,2,4,0,0,0,0,4,1,3,3,4,0,0,0],
            [0,0,0,0,0,0,0,0,0,3,1,2,4,0,0,4,2,4,2,4,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,4,2,3,3,4,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,3,4,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0]
        ]
    }
};

document.querySelectorAll("#menu-button").forEach(btn => {
    btn.addEventListener("click", () => {
        const choice = btn.dataset.puzzle;
        currentPuzzle = choice;
        menu.classList.add("hidden");
        game.classList.remove("hidden");
        loadPuzzle(puzzles[choice]);
    });
});

function loadPuzzle(puzzle) {
    winMessage.style.display = "none";
    renderPalette(puzzle.palette);
    renderGrid(puzzle);
}